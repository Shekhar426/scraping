from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.options import Options
from selenium.common.exceptions import TimeoutException, StaleElementReferenceException

chrome_options = Options()
chrome_options.add_experimental_option("detach", True)
driver = webdriver.Chrome(service = executable_path, options= chrome_options)
wait = WebDriverWait(driver, 3)

urls = ["https://www.eyeconic.com/contact-lenses/apdm/APDM.html", "https://www.eyeconic.com/contact-lenses/acuvue-vita-12pk/AVI2.html", "https://www.eyeconic.com/contact-lenses/acuvue-oasys-hydraclear-plus-12pk/AO12.html", "https://www.eyeconic.com/contact-lenses/att9/ATT9.html", "https://www.eyeconic.com/contact-lenses/biofinity-toric-6pk/BFT.html", "https://www.eyeconic.com/contact-lenses/acuvue-oasys-hydraclear-plus-24pk/AO24.html", "https://www.eyeconic.com/contact-lenses/biofinity-ew-6pk/BF.html", "https://www.eyeconic.com/contact-lenses/a2t/A2T.html", "https://www.eyeconic.com/contact-lenses/air-optix-plus-hydraglyde/AHG.html", "https://www.eyeconic.com/contact-lenses/acuvue-1-day-moist-90pk/A1M9.html", "https://www.eyeconic.com/contact-lenses/ead9/EAD9.html", "https://www.eyeconic.com/contact-lenses/acuvue-oasys-hydraluxe-1-day-90pk/AOH9.html", "https://www.eyeconic.com/contact-lenses/appt/APPT.html", "https://www.eyeconic.com/contact-lenses/atm9/ATM9.html", "https://www.eyeconic.com/contact-lenses/acuvue-oasys-astigmatism-6pk/AOT.html", "https://www.eyeconic.com/contact-lenses/eaw/EAW.html", "https://www.eyeconic.com/contact-lenses/biofinity-xr-toric-6pk/BFTX.html", "https://www.eyeconic.com/contact-lenses/eam/EAM.html", "https://www.eyeconic.com/contact-lenses/bausch-lomb-ultra-for-astigmatism-6pk/ULA.html", "https://www.eyeconic.com/contact-lenses/p190/P190.html", "https://www.eyeconic.com/contact-lenses/apnm/APNM.html", "https://www.eyeconic.com/contact-lenses/dailies-total1-90pk/DT90.html", "https://www.eyeconic.com/contact-lenses/aha/AHA.html", "https://www.eyeconic.com/contact-lenses/o1t9/O1T9.html", "https://www.eyeconic.com/contact-lenses/p1a9/P1A9.html", "https://www.eyeconic.com/contact-lenses/dailies-aqua-comfort-plus-90pk/DA90.html", "https://www.eyeconic.com/contact-lenses/acuvue-1-day-moist-for-astigmatism-90pk/A1T9.html", "https://www.eyeconic.com/contact-lenses/air-optix-night-day-aqua-6pk/AND.html", "https://www.eyeconic.com/contact-lenses/air-optix-hydraglyde-multifocal-6pk/AHM.html", "https://www.eyeconic.com/contact-lenses/ax30/AX30.html", "https://www.eyeconic.com/contact-lenses/biofinity-energys-6pk/BFE.html", "https://www.eyeconic.com/contact-lenses/tot/TOT.html", "https://www.eyeconic.com/contact-lenses/biotrue-oneday-90pk/BO90.html", "https://www.eyeconic.com/contact-lenses/clariti-1-day-90pk/CL90.html", "https://www.eyeconic.com/contact-lenses/in90/IN90.html", "https://www.eyeconic.com/contact-lenses/aop/AOP.html", "https://www.eyeconic.com/contact-lenses/toa/TOA.html", "https://www.eyeconic.com/contact-lenses/bausch-lomb-ultra-6pk/UL6.html", "https://www.eyeconic.com/contact-lenses/myday-toric-90pk/MD9T.html", "https://www.eyeconic.com/contact-lenses/acuvue-vita-astigmatism-6pk/AVIA.html", "https://www.eyeconic.com/contact-lenses/axm9/AXM9.html", "https://www.eyeconic.com/contact-lenses/dta3/DTA3.html", "https://www.eyeconic.com/contact-lenses/axm3/AXM3.html", "https://www.eyeconic.com/contact-lenses/bmd/BMD.html", "https://www.eyeconic.com/contact-lenses/air-optix-colors-6pk/AOC.html", "https://www.eyeconic.com/contact-lenses/dailies-total1-multifocal-90pk/DTM9.html", "https://www.eyeconic.com/contact-lenses/clariti-1-day-toric-90pk/CLT9.html", "https://www.eyeconic.com/contact-lenses/md18/MD18.html", "https://www.eyeconic.com/contact-lenses/bmn/BMN.html", "https://www.eyeconic.com/contact-lenses/cl30/CL30.html", "https://www.eyeconic.com/contact-lenses/acuvue-oasys-1-day-astigmatism-30pk/O1T3.html", "https://www.eyeconic.com/contact-lenses/biotrue-oneday-for-astigmatism-90pk/BOA9.html", "https://www.eyeconic.com/contact-lenses/p130/P130.html", "https://www.eyeconic.com/contact-lenses/biofinity-multifocal-6pk/BFM.html", "https://www.eyeconic.com/contact-lenses/ultra-for-astigmatism-6pk/UMA.html", "https://www.eyeconic.com/contact-lenses/acuvue-oasys-transitions/OTR.html", "https://www.eyeconic.com/contact-lenses/dailies-aqua-comfort-plus-toric-90pk/DAT9.html", "https://www.eyeconic.com/contact-lenses/dailies-colors-90pk/DAC9.html", "https://www.eyeconic.com/contact-lenses/bausch-lomb-ultra-for-presbyopia-6pk/ULM.html", "https://www.eyeconic.com/contact-lenses/dailies-colors-30pk/DAC3.html", "https://www.eyeconic.com/contact-lenses/acuvue-2-6pk/A2.html", "https://www.eyeconic.com/contact-lenses/myday-90pk/MD90.html", "https://www.eyeconic.com/contact-lenses/biotrue-oneday-for-presbyopia-90p/BOM9.html", "https://www.eyeconic.com/contact-lenses/avaira-vitality-6pk/AVV.html", "https://www.eyeconic.com/contact-lenses/avaira-vitality-toric-6pk/ATV.html", "https://www.eyeconic.com/contact-lenses/acuvue-1-day-moist-multifocal-90pk/A1B9.html", "https://www.eyeconic.com/contact-lenses/biotrue-oneday-for-astigmatism-30pk/BOA3.html", "https://www.eyeconic.com/contact-lenses/acuvue-vita-6pk/AVI.html", "https://www.eyeconic.com/contact-lenses/air-optix-colors-2pk/AOC2.html", "https://www.eyeconic.com/contact-lenses/acuvue-1-day-moist-for-astigmatism-30pk/A1T.html", "https://www.eyeconic.com/contact-lenses/acuvue-1-day-moist-30pk/A1M.html", "https://www.eyeconic.com/contact-lenses/dailies-total1-multifocal-30pk/DTM3.html", "https://www.eyeconic.com/contact-lenses/proclear-1-day-90pk/PD90.html", "https://www.eyeconic.com/contact-lenses/dailies-total1-30pk/DT30.html", "https://www.eyeconic.com/contact-lenses/dailies-aqua-comfort-plus-multifocal-90pk/DAM9.html", "https://www.eyeconic.com/contact-lenses/clariti-1-day-multifocal-90pk/CLM9.html", "https://www.eyeconic.com/contact-lenses/proclear-compatibles-6pk/PC.html", "https://www.eyeconic.com/contact-lenses/biotrue-oneday-30pk/BO30.html", "https://www.eyeconic.com/contact-lenses/adf3/ADF3.html", "https://www.eyeconic.com/contact-lenses/biomedics-55-premier-6pk/B5P.html", "https://www.eyeconic.com/contact-lenses/dailies-aqua-comfort-plus-30pk/DA30.html", "https://www.eyeconic.com/contact-lenses/dailies-aqua-comfort-plus-toric-30pk/DAT3.html", "https://www.eyeconic.com/contact-lenses/acuvue-1-day-moist-multifocal-30pk/A1B3.html", "https://www.eyeconic.com/contact-lenses/proclear-1-day-multifocal-90pk/PDM9.html", "https://www.eyeconic.com/contact-lenses/proclear-toric-6pk/PCT.html", "https://www.eyeconic.com/contact-lenses/clariti-1-day-toric-30pk/CLT3.html", "https://www.eyeconic.com/contact-lenses/proclear-toric-xr-6pk/PTX.html", "https://www.eyeconic.com/contact-lenses/biomedics-toric-6pk/BT.html", "https://www.eyeconic.com/contact-lenses/biofinity-xr-6pk/BFX.html", "https://www.eyeconic.com/contact-lenses/biotrue-oneday-for-presbyopia-30pk/BOM.html", "https://www.eyeconic.com/contact-lenses/dailies-aqua-comfort-plus-multifocal-30pk/DAM3.html", "https://www.eyeconic.com/contact-lenses/proclear-multifocal-6pk/PCM.html", "https://www.eyeconic.com/contact-lenses/clariti-1-day-multifocal-30pk/CLM3.html", "https://www.eyeconic.com/contact-lenses/proclear-multifocal-non-dominant-6pk/PMN.html", "https://www.eyeconic.com/contact-lenses/proclear-multifocal-dominant-6pk/PMD.html"]

number = 1
for i in urls:
    driver.get(i)
    print(number, i, end=" | ")
    number = number + 1
    name  = wait.until(EC.visibility_of_element_located((By.XPATH, "//h1[@id='product-name']"))).text
    print(name, end=" | ")
    price  = wait.until(EC.visibility_of_element_located((By.XPATH, "//span[@id='product-price']"))).text
    print(price, end=" | ")
    try:
        quantity = wait.until(EC.visibility_of_element_located((By.XPATH, "//div[@itemprop='offers']/p[2]"))).text
        print(quantity[9:11].strip(), end=" | ")
    except TimeoutException:
        pass
    try:
        unit = wait.until(EC.visibility_of_element_located((By.XPATH, "//p[contains(text(), 'per box (6 lenses per box)')]"))).text
        print(unit[0:7].strip(), end=" | ")
    except:
        pass
    try:
        ratings = wait.until(EC.visibility_of_element_located((By.XPATH, "//span[@itemprop='ratingValue']"))).text
        print(ratings)
    except:
        print(end="")
        pass
